<div class="subject-page">

  <!-- Header with Dashboard back button -->
  <div class="subject-header-container">
    <h2>ğŸ“ Subject Files</h2>
    <button class="back-btn" (click)="goToDashboard()">
      <span class="icon">â†</span> Dashboard
    </button>
  </div>

  <!-- Upload Section -->
  <div class="upload-section">
    <h3>Upload New File</h3>
    
    <div class="file-info">
      <strong>Allowed:</strong> 
      <span class="allowed-types">{{ allowedExtensions.join(', ') }}</span>
      <strong>Max size:</strong> 10MB
    </div>

    <div class="alert alert-error" *ngIf="uploadError">
      âš ï¸ {{ uploadError }}
    </div>

    <div class="alert alert-success" *ngIf="uploadSuccess">
      âœ… {{ uploadSuccess }}
    </div>

    <div class="upload-box">
      <input 
        type="file" 
        (change)="onFileSelected($event)"
        accept=".pdf,.doc,.docx,.ppt,.pptx,.txt,.jpg,.jpeg,.png,.xls,.xlsx"
      />
      <button 
        (click)="upload()" 
        [disabled]="!selectedFile"
      >
        Upload
      </button>
    </div>
  </div>

  <!-- File List -->
  <div class="file-list">
    <h3>Uploaded Files</h3>

    <div *ngIf="files.length === 0" class="no-files">
      No files uploaded yet. Upload your first file above!
    </div>

    <div class="file-item" *ngFor="let file of files">
      <span class="file-icon">{{ getFileIcon(file.filename) }}</span>

      <input 
        *ngIf="editingFileId === file.id" 
        type="text" 
        [(ngModel)]="file.filename"
        class="edit-input"
      />
      <span *ngIf="editingFileId !== file.id" class="filename">
        {{ file.filename }}
      </span>

      <div class="file-actions">
        <button (click)="downloadFile(file.id, file.filename)" class="btn-download" title="Download">â¬‡ï¸</button>
        <button *ngIf="editingFileId !== file.id" (click)="startEdit(file.id, file.filename)" class="btn-edit" title="Rename">âœï¸</button>
        <button *ngIf="editingFileId === file.id" (click)="saveFilename(file)" class="btn-save" title="Save">âœ…</button>
        <button *ngIf="editingFileId === file.id" (click)="cancelEdit(file)" class="btn-cancel" title="Cancel">âŒ</button>
        <button *ngIf="editingFileId !== file.id" (click)="deleteFile(file.id, file.filename)" class="btn-delete" title="Delete">ğŸ—‘ï¸</button>
      </div>
    </div>
  </div>
</div>

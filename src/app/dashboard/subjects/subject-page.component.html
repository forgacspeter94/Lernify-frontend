<div class="subject-page">
  <h2>ğŸ“ Subject Files</h2>

  <!-- Upload Section -->
  <div class="upload-section">
    <h3>Upload New File</h3>
    
    <!-- Allowed file types info -->
    <div class="file-info">
      <strong>Allowed:</strong> 
      <span class="allowed-types">{{ allowedExtensions.join(', ') }}</span>
      <strong>Max size:</strong> 10MB
    </div>

    <!-- Error Message -->
    <div class="alert alert-error" *ngIf="uploadError">
      âš ï¸ {{ uploadError }}
    </div>

    <!-- Success Message -->
    <div class="alert alert-success" *ngIf="uploadSuccess">
      âœ… {{ uploadSuccess }}
    </div>

    <!-- Upload Box -->
    <div class="upload-box">
      <input 
        type="file" 
        (change)="onFileSelected($event)"
        accept=".pdf,.doc,.docx,.ppt,.pptx,.txt,.jpg,.jpeg,.png,.xls,.xlsx"
      />
      <button 
        (click)="upload()" 
        [disabled]="!selectedFile"
      >
        Upload
      </button>
    </div>
  </div>

  <!-- File List -->
  <div class="file-list">
    <h3>Uploaded Files</h3>

    <div *ngIf="files.length === 0" class="no-files">
      No files uploaded yet. Upload your first file above!
    </div>

    <div class="file-item" *ngFor="let file of files">
      <!-- Icon -->
      <span class="file-icon">{{ getFileIcon(file.filename) }}</span>

      <!-- Filename (editable) -->
      <input 
        *ngIf="editingFileId === file.id" 
        type="text" 
        [(ngModel)]="file.filename"
        class="edit-input"
      />
      <span *ngIf="editingFileId !== file.id" class="filename">
        {{ file.filename }}
      </span>

      <!-- Actions -->
      <div class="file-actions">
        <!-- Download -->
        <button 
          (click)="downloadFile(file.id, file.filename)"
          class="btn-download"
          title="Download"
        >
          â¬‡ï¸
        </button>

        <!-- Edit/Save/Cancel -->
        <button 
          *ngIf="editingFileId !== file.id" 
          (click)="startEdit(file.id, file.filename)"
          class="btn-edit"
          title="Rename"
        >
          âœï¸
        </button>
        <button 
          *ngIf="editingFileId === file.id" 
          (click)="saveFilename(file)"
          class="btn-save"
          title="Save"
        >
          âœ…
        </button>
        <button 
          *ngIf="editingFileId === file.id" 
          (click)="cancelEdit(file)"
          class="btn-cancel"
          title="Cancel"
        >
          âŒ
        </button>

        <!-- Delete -->
        <button 
          *ngIf="editingFileId !== file.id"
          (click)="deleteFile(file.id, file.filename)"
          class="btn-delete"
          title="Delete"
        >
          ğŸ—‘ï¸
        </button>
      </div>
    </div>
  </div>
</div>